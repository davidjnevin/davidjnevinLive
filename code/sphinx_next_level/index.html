<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Sphinx Next Level" />
<meta property="og:description" content="From my previous post, sphinx appears to be just another static site generator." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.davidjnevin.com/code/sphinx_next_level/" /><meta property="article:section" content="code" />
<meta property="article:published_time" content="2022-11-03T11:46:02&#43;01:00" />
<meta property="article:modified_time" content="2022-11-04T20:21:45&#43;01:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sphinx Next Level"/>
<meta name="twitter:description" content="From my previous post, sphinx appears to be just another static site generator."/>

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VGVQ6SM9N7"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-VGVQ6SM9N7', { 'anonymize_ip': false });
}
</script>

  
  <title>
    
    David J Nevin - Sphinx Next Level
    
  </title>
  
  <link rel="icon" href="https://davidjnevin.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://davidjnevin.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://davidjnevin.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://davidjnevin.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://davidjnevin.com/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.81.0" />
<link rel="alternate" type="application/rss&#43;xml" href="https://davidjnevin.com/index.xml" title="David J Nevin">
<link rel="alternate" type="application/json" href="https://davidjnevin.com/index.json">


  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@700&amp;family=EB+Garamond:ital,wght@0,400;0,700;1,500&amp;family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&amp;family=Merriweather:wght@900&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/normalize.css">
  <link rel="stylesheet" href="/css/style.css">

  <script defer src="/js/main.js"></script>
</head>


<body>
  <header>
  <h1 class="row gap-1 nowrap">
    
    <a href="/">David J Nevin</a><a href="/code">+= Code</a>
  </h1>
  <nav class="row gap-1">
  
  </nav>
  
</header>
  
   
<main>
  

  
  
  
        
              
              <div class="postdate">
              <div class="sm-1 mtb-1">Last updated: Nov 4, 2022</div>
              
              </div>
        
  

  


    <article class="md">
     

    <h1>Sphinx Next Level</h1>
    








    <nav id="TableOfContents">
  <ul>
    <li><a href="#code-documentation">Code Documentation</a></li>
    <li><a href="#getting-the-project-setup">Getting the Project Setup</a></li>
    <li><a href="#hello-md-goodbye-rst">Hello .md Goodbye .rst</a></li>
    <li><a href="#live-reload--auto-build">Live Reload / Auto build</a></li>
    <li><a href="#include-a-file">Include a File</a></li>
    <li><a href="#add-a-warning">Add a Warning</a></li>
    <li><a href="#are-we-there-yet">Are we there yet?</a></li>
    <li><a href="#look-and-feel">Look and Feel</a></li>
    <li><a href="#adding-usage-section">Adding Usage Section</a></li>
    <li><a href="#add-relative-reference-links">Add Relative Reference Links</a></li>
    <li><a href="#integrating-jupyter-notebooks">Integrating Jupyter Notebooks</a></li>
    <li><a href="#documenting-code-manually">Documenting Code Manually</a></li>
    <li><a href="#automate-code-documentation-import">Automate Code Documentation Import</a></li>
    <li><a href="#linking-to-the-specific-code-docstring">Linking to the Specific Code docstring</a></li>
  </ul>
</nav>


      <p>From my <a href="/code/sphinx_setup/">previous post</a>, <code>sphinx</code> appears to be just another static site
generator. But there&rsquo;s much more to explore and do. Automation is where it&rsquo;s at. A robust documentation pipeline is the goal of this delve into some of the powerful features in <code>sphinx</code>. Let&rsquo;s go.</p>
<h2 id="code-documentation">Code Documentation</h2>
<p>For these experiments I&rsquo;m using code from a simple <code>django-ninja</code> CRUD project. I&rsquo;ve documented the code and it will provide the necessary base for our testing.</p>
<p>I use the <code>coc-pydocstring</code> extension for <code>coc.nvim</code> in vim to generate &ldquo;Google Docstring&rdquo;. Full details of the plugin are available at the <a href="https://github.com/yaegassy/coc-pydocstring">yaegassy / coc-pydocstring repository</a>. The PEP 257 Docstring Conventions can be found on the <a href="https://peps.python.org/pep-0257/">python pep 257 webpage</a>.</p>
<h2 id="getting-the-project-setup">Getting the Project Setup</h2>
<p>For this post I&rsquo;m doing a clean install. My basic setup is as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span><span class="lnt" id="104"><a style="outline: none; text-decoration:none; color:inherit" href="#104">104</a>
</span><span class="lnt" id="105"><a style="outline: none; text-decoration:none; color:inherit" href="#105">105</a>
</span><span class="lnt" id="106"><a style="outline: none; text-decoration:none; color:inherit" href="#106">106</a>
</span><span class="lnt" id="107"><a style="outline: none; text-decoration:none; color:inherit" href="#107">107</a>
</span><span class="lnt" id="108"><a style="outline: none; text-decoration:none; color:inherit" href="#108">108</a>
</span><span class="lnt" id="109"><a style="outline: none; text-decoration:none; color:inherit" href="#109">109</a>
</span><span class="lnt" id="110"><a style="outline: none; text-decoration:none; color:inherit" href="#110">110</a>
</span><span class="lnt" id="111"><a style="outline: none; text-decoration:none; color:inherit" href="#111">111</a>
</span><span class="lnt" id="112"><a style="outline: none; text-decoration:none; color:inherit" href="#112">112</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># from my projects director</span>
<span class="c1"># setup workspace</span>
mkdir sphinx-next-level
<span class="nb">cd</span> sphinx-next-level
<span class="c1">#setup virtual environment</span>
python3.10 -m venv venv <span class="o">&amp;&amp;</span> <span class="nb">source</span> venv/bin/activate
<span class="nb">source</span> venv/bin/activate
python3 -m pip install --upgrade pip
<span class="c1"># setup git</span>
git init
<span class="c1"># see note below</span>
git add .gitignore
git commit -m<span class="s2">&#34;Add .gitignore in Initial Commit&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>For a <code>.gitignore</code> for python/django/jupyter notebooks visit the <a href="https://www.toptal.com/developers/gitignore/api/python,jupyternotebooks">toptotal website</a>.</p>
<p>For this project I&rsquo;m using a <code>requirements.txt</code> to manage the project dependencies.  The key here is the dependencies. I&rsquo;ll be adding them as the project develops. At the start it looks like this.</p>
<pre><code>sphinx~=4.2.0
</code></pre><p>To install sphinx I run:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pip install -r requirements.txt
</code></pre></td></tr></table>
</div>
</div><p>We know have access to the sphinx-quickbuild command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sphinx-quickstart docs
</code></pre></td></tr></table>
</div>
</div><p>A quick start interactive starts up.  I choose to separate <code>source</code> and <code>build</code> directories in the root path.</p>
<ul>
<li>Add your project name</li>
<li>Add your own name and email</li>
<li>Project release 0.1.0</li>
<li>Project language</li>
</ul>
<p>Now is a good time to test.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> docs
make html
</code></pre></td></tr></table>
</div>
</div><p>No errors and we&rsquo;re good to go. Let&rsquo;s serve the pages and have a look.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> build/html/
python http.server
</code></pre></td></tr></table>
</div>
</div><p>All&rsquo;s working. Now&rsquo;s a good time to commit. (GTTC)</p>
<p><code>reStructuredText</code> is one of the oldest and fully featured text markup standards. However <code>markdown</code> has grown in popularity and is used across many platforms. So I use <code>markdown</code> in Sphinx.</p>
<h2 id="hello-md-goodbye-rst">Hello .md Goodbye .rst</h2>
<p>I convert from <code>.rst</code> to <code>markdown</code> using rst-to-myst.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span><span class="lnt" id="104"><a style="outline: none; text-decoration:none; color:inherit" href="#104">104</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pip install rst-to-myst
rst2myst convert docs/**/*.rst <span class="c1"># convert every file under docs</span>
<span class="c1"># It&#39;s possible to run the convert command with -R flag to</span>
<span class="c1"># replace the .rst file as opposed to creating .md files</span>
<span class="c1"># beside the original .rst files. But, caution.</span>
</code></pre></td></tr></table>
</div>
</div><p>I then delete the <code>index.rst</code> and edit <code>conf.py</code>.  The myst_enable_extensions enable sphinx definition lists.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span><span class="lnt" id="104"><a style="outline: none; text-decoration:none; color:inherit" href="#104">104</a>
</span><span class="lnt" id="105"><a style="outline: none; text-decoration:none; color:inherit" href="#105">105</a>
</span><span class="lnt" id="106"><a style="outline: none; text-decoration:none; color:inherit" href="#106">106</a>
</span><span class="lnt" id="107"><a style="outline: none; text-decoration:none; color:inherit" href="#107">107</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&#34;myst_parser&#34;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">myst_enable_extensions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&#34;deflist&#34;</span><span class="p">,</span>
<span class="p">]</span>

</code></pre></td></tr></table>
</div>
</div><p>And install <code>myst-parser</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pip install myst-parser
<span class="c1"># test</span>
<span class="nb">cd</span> docs/build/html/
python http.server
</code></pre></td></tr></table>
</div>
</div><p>We are up and running and our files are in <code>markdown</code>.</p>
<p>GTTC.</p>
<h2 id="live-reload--auto-build">Live Reload / Auto build</h2>
<p>Running and stoping the <code>http.server</code> over and over is tiresome.</p>
<p><code>Sphinx</code> has a solution for that.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pip install sphinx-autobuild
</code></pre></td></tr></table>
</div>
</div><p>This allows us to start the http server and let it run. When I make changes to the <code>.md</code> files it will automatically rebuild the site and refresh the browser. It&rsquo;s similar to live reload in other apps. The server doesn&rsquo;t update if you make changes to the <code>.py</code> files.</p>
<p>To start autobuild:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># from the root of your project</span>
<span class="c1"># command /inputDirectory /outputDirectory/</span>
sphinx-autobuild docs/source/ docs/build/html/

</code></pre></td></tr></table>
</div>
</div><p>Now when I modify the documentation the documentation site updates automatically.</p>
<p>I then remove the lines below from <code>conf.py</code>. These are used for the general index, the Python module index, and a standalone search page. I don&rsquo;t need them for this project.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown"><span class="k">-</span> {ref}`genindex`
<span class="k">-</span> {ref}`modindex`
<span class="k">-</span> {ref}`search`
</code></pre></td></tr></table>
</div>
</div><h2 id="include-a-file">Include a File</h2>
<p>To include the existing <code>README.md</code> of your project add the following to <code>index.md</code>. We use the <code>include directive</code>.  Notice the opening and closing three back-tics.```</p>
<p>These open and close the directive. {&ldquo;directive name&rdquo;}</p>
<pre><code> ```{include} ../../README.md
 :relative-images:
```
</code></pre>
<h2 id="add-a-warning">Add a Warning</h2>
<p>To add a warning, we use the <code>warning directive</code>.</p>
<pre><code>```{warning}
	This site is under heavy delvelopment.
```
</code></pre>
<p>For a list of directives the <a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#directives">sphinx documentation pages</a> are the place to go.</p>
<p>GTTC.</p>
<h2 id="are-we-there-yet">Are we there yet?</h2>
<p>To get a readout of the duration of your build add &ldquo;sphinx.ext.duration&rdquo; to <code>conf.py</code> extensions.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">extensions = [
    ...
    &#34;sphinx.ext.duration&#34;,
]
</code></pre></td></tr></table>
</div>
</div><h2 id="look-and-feel">Look and Feel</h2>
<p>There are a lot of great themes to choose from. The <a href="https://sphinx-themes.org/">Sphinx Themes Gallery</a> has a large selection. I&rsquo;m torn between <code>furo</code> and <code>documatt</code>. It depends on the project.</p>
<p>Install the theme:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pip install furo
<span class="c1"># or</span>
pip install sphinx_documatt_theme
</code></pre></td></tr></table>
</div>
</div><p>Activate in <code>conf.py</code> by changing the selected theme.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">html_theme = &#34;furo&#34;
<span class="gh"># or
</span><span class="gh"></span>html_theme = &#34;sphinx_documatt_theme&#34;
</code></pre></td></tr></table>
</div>
</div><p>GTTC.</p>
<h2 id="adding-usage-section">Adding Usage Section</h2>
<p>Create a <code>usage.md</code> file in the source folder.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span><span class="lnt" id="104"><a style="outline: none; text-decoration:none; color:inherit" href="#104">104</a>
</span><span class="lnt" id="105"><a style="outline: none; text-decoration:none; color:inherit" href="#105">105</a>
</span><span class="lnt" id="106"><a style="outline: none; text-decoration:none; color:inherit" href="#106">106</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown"><span class="gh"># Usage
</span><span class="gh"></span>
<span class="gu">## Installation
</span><span class="gu"></span>
Installation instructions to go here <span class="ni">#TODO</span>

    pip install <span class="p">&lt;</span><span class="nt">libraryname</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>If I build now, I will get a warning that <code>usage.md</code> is not in any <code>toctree</code> directive. Edit <code>index.md</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span><span class="lnt" id="104"><a style="outline: none; text-decoration:none; color:inherit" href="#104">104</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">	```{toctree}
	:caption: &#39;Contents:&#39;
	:maxdepth: 2
	usage
	```
</code></pre></td></tr></table>
</div>
</div><h2 id="add-relative-reference-links">Add Relative Reference Links</h2>
<p>To add a domain independent or relative link to another document use:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">For more information read {doc}`usage`
</code></pre></td></tr></table>
</div>
</div><p>In this example I added it to <code>index.md</code></p>
<p>To add a relative reference to a specific heading in a document there is a required extension.</p>
<p>In <code>conf.py</code> add:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
	<span class="o">...</span>
	<span class="s2">&#34;sphinx.ext.autosectionlabel&#34;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>And in our <code>index.md</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">For more installation instructions read {ref}`Installation`
</code></pre></td></tr></table>
</div>
</div><p>Note: The reference heading should be unique.</p>
<p>GTTC.</p>
<h2 id="integrating-jupyter-notebooks">Integrating Jupyter Notebooks</h2>
<p>Add the <code>nbsphnix</code> extension to  <code>conf.py</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
	<span class="o">...</span>
	<span class="s2">&#34;nbsphinx&#34;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>If you don&rsquo;t have <code>pandoc</code> installed you will receive an error when you rebuild.</p>
<p>To install <code>pandoc</code> the full instructions are on the <a href="https://pandoc.org/">pandoc official website</a>.</p>
<p>For me on my MacOS, I use:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">brew install pandoc
</code></pre></td></tr></table>
</div>
</div><p>GTTC.</p>
<h2 id="documenting-code-manually">Documenting Code Manually</h2>
<p>To manually include documentation for a particular piece of code we use the {eval-rst} directive in our markdown.</p>
<pre><code>```{eval-rst}
.. function:: example.get_attendee_names(kind=None)
     Return a list of attendees
    :param kind: Optional &quot;kind&quot; argument
	:type kind: list[str] or None
	:rtype: list[str]
```
</code></pre>
<p>This outputs the following:</p>
<p>example.get_attendee_names(kind=None)</p>
<p>Return a list of optional ingredients</p>
<p>Parameters</p>
<p><strong>kind</strong> (<em>list</em>_[__str__] or_ _None_) – Optional “kind” argument</p>
<p>Return type</p>
<p>list[str]</p>
<h2 id="automate-code-documentation-import">Automate Code Documentation Import</h2>
<p>To automatically detect and create the documentation page for our code we need to add <code>sphinx.ext.autodoc</code> to the extensions list in <code>conf.py</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt" id="100"><a style="outline: none; text-decoration:none; color:inherit" href="#100">100</a>
</span><span class="lnt" id="101"><a style="outline: none; text-decoration:none; color:inherit" href="#101">101</a>
</span><span class="lnt" id="102"><a style="outline: none; text-decoration:none; color:inherit" href="#102">102</a>
</span><span class="lnt" id="103"><a style="outline: none; text-decoration:none; color:inherit" href="#103">103</a>
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
		<span class="o">...</span>
		<span class="s2">&#34;sphinx.ext.autodoc&#34;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>We then add a reference use <code>autoformat</code> to our <code>markdown</code>. In my case I added
it to <code>index.md</code>.</p>
<pre><code>```{eval-rst}
.. autofunction:: example.get_attendee_name
```
</code></pre>
<p>Every time the site documentation is built, sphinx reads the code docstring and includes it in the documentation. The documentation is automatically kept up to date with changes in the code documentation.</p>
<p>I document my code and <code>autodoc</code> does the rest.</p>
<h2 id="linking-to-the-specific-code-docstring">Linking to the Specific Code docstring</h2>
<p>I use the <code>{py:func}</code> directive in my markdown to create a link to the source code documentation of a particular function.</p>
<pre><code>{py:func}`example.get_attendee_name`
</code></pre>
<p>The <code>{py:func}</code> directive generates a relative link to the specific function on the documentation page. There are similar directives for classes <code>{py:class}</code>, modules <code>{py:mod}</code>, and methods <code>{py:meth}</code>. For a full list of cross-referencing python objects visit the <a href="https://www.sphinx-doc.org/">sphinx documentation website</a>.</p>
<p>Ok. That&rsquo;s a lot.</p>
<p>It&rsquo;s a good time to commit. (GTTC)</p>
<p>In the next post, I want to start answering some of my more burning questions.</p>
<p>How do I manage <code>google docstring</code> code comments?</p>
<p>How do I generate the docs for a complete code base?</p>
<p>How to I handle <code>todo</code> items in my code base <code>docstring</code>?</p>
<p>How do I add some flavour to my docs?</p>
<p>#source</p>
<p><a href="https://www.youtube.com/watch?v=qRSb299awB0&amp;t=636s">Document Your Scientific Project With Markdown, Sphinx, and Read the Docs | PyData Global 2021</a></p>
<p><a href="https://docs.readthedocs.io/en/stable/guides/migrate-rest-myst.html">ReadtheDocs Migrate Restructured to Markdown</a></p>
<p><a href="https://www.sphinx-doc.org/">Sphinx Documentation</a></p>
<p><a href="https://myst-parser.readthedocs.io/">Markedly Structured Test</a></p>

  </article>
  <article class="md prev_next">
    <hr>
    
    <div class="post_previous">
      Previous: <a href=/code/sphinx_setup/>Sphinx Setup</a>
    
  </article>
  <article class="md prev_next">
      
  </article>
</main>


  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VGVQ6SM9N7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VGVQ6SM9N7');
</script>
  
<footer class="row row-mob al-c-mob col-rev-mob sm-2-mob jc-bt mtb-2">
  <p class="c-tag footer-small-text">© 2022 David J. Nevin
    
  </p>
  <div class=" row gap-0_5">
    
      <a class="icon" href="https://twitter.com/davidjnevin" title="twitter">
      
        <svg fill="#1da1f2" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
      
      </a>
    
      <a class="icon" href="https://www.linkedin.com/in/davidnevin/" title="linkedin">
      
        <svg fill="#0073b1" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      
      </a>
    
      <a class="icon" href="https://github.com/davidjnevin" title="github">
      
        <svg fill="#63636f" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      
      </a>
    
      <a class="icon" href="https://leetcode.com/davidjnevin/" title="leetcode">
      
        <svg fill="#1da1f2" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Leetcode</title><path d="M21.469 23.907l-3.595 3.473c-0.624 0.625-1.484 0.885-2.432 0.885s-1.807-0.26-2.432-0.885l-5.776-5.812c-0.62-0.625-0.937-1.537-0.937-2.485 0-0.952 0.317-1.812 0.937-2.432l5.76-5.844c0.62-0.619 1.5-0.859 2.448-0.859s1.808 0.26 2.432 0.885l3.595 3.473c0.687 0.688 1.823 0.663 2.536-0.052 0.708-0.713 0.735-1.848 0.047-2.536l-3.473-3.511c-0.901-0.891-2.032-1.505-3.261-1.787l3.287-3.333c0.688-0.687 0.667-1.823-0.047-2.536s-1.849-0.735-2.536-0.052l-13.469 13.469c-1.307 1.312-1.989 3.113-1.989 5.113 0 1.996 0.683 3.86 1.989 5.168l5.797 5.812c1.307 1.307 3.115 1.937 5.115 1.937 1.995 0 3.801-0.683 5.109-1.989l3.479-3.521c0.688-0.683 0.661-1.817-0.052-2.531s-1.849-0.74-2.531-0.052zM27.749 17.349h-13.531c-0.932 0-1.692 0.801-1.692 1.791 0 0.991 0.76 1.797 1.692 1.797h13.531c0.933 0 1.693-0.807 1.693-1.797 0-0.989-0.76-1.791-1.693-1.791z"/></path></svg>
      
      </a>
    
    </div>
</footer>
</body>

</html>